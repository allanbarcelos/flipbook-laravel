language: php
php:
- 7.2
before_script:
- pecl install imagick
- phpenv config-rm xdebug.ini
- cp .env.travis .env
- composer self-update
- composer install --no-interaction
- php artisan key:generate
- php artisan migrate:fresh --seed
before_install:
- mysql -u root -e 'DROP DATABASE IF EXISTS travis;'
- mysql -u root -e 'CREATE DATABASE IF NOT EXISTS travis;'
script:
- phpunit
services:
- mysql
cache:
  directories:
  - node_modules
  - vendor
env:
  matrix:
  - TRAVIS_NODE_VERSION="4"
  global:
  - secure: b7a2GchujTHCCM12ek+zq+ExeyucZtCOX2lpyS9UqVCakENj1b7Xntq1lR5FvHeFyZDYJtjyofoinr82uj1mbpvWbYkg9nrXzfwyWkPRs/h0zNcINvukBSCqbx7mVQWwCKv4ufrKQTUG6TfjpXOmhan9/Df0sxtx4SgG1dKeg/VrjVPnZEusjbDGAhakV/AMYR2xF1Bw8IAEbEv9k/am6/o3x0HVJeQmd7xtctWYNiJ6AQvu+OxEjwrslFBmSgTVxvfmj9GxBCp1M494w7duqVcV0c++each6YFXC6oJ8C1XE7tApt1oHuKp8hzxirPrdSZYG2NpS6j1kMlpskSziHSaIC0anEjfZTcOzEQNqrxeOt8EBU0vG68Mc2OqCUXUpVDU3dVgbhEEUO2Wb7/IAFaQjqHX3nf0l+I2MucT5SMXggUAKCgENLbHKgDNN7HiNVIkkBThm0tiAG4w6ukv12u7t4Jodb42hJvNOFULC2Z5P9A6fOUC7Ck+OJWrjmU+Vf54Ts1p01jYrkVJDmr/YMLFwiTQGJ1ODMWtyM+YZFSa19qyVdwJrV+tuBmMTTaEphAY9WdG8Hh6vL2A6PsCpInhRb8E3XPywOy3edaBO1B+n76xjSmh2gdlhPneEedzgPVzcXmT7t7U7NenZIsWvJLf20UtWdutqb3SISCuEIk=
  - secure: EE4pKjj+wrJ3BDpqAhtScSpN79tpWJQ7mShCA8ku7DXlLtdxUlEIpYzXPruM2t692fPfgEnRTHVdWlwKrq6Ycnrxa+IOObnqxA5qzIGvvWxsWB7Mvr0OJJKoYtQtj/gGRys0+sN1nb7syt7RDXiGdrMhhCtUfHb0a9Zv4t82jpZERdjjBhP3VAeYx2KAyfhmKzF3PMCI/5y1AaCzxOG7GXH6VsQbZ+UuE843UfqtWX3pT/TlXv75D33z8d8h3pD1TRVC7GV4rkfhmNuN4Wj4zYHXrj4xqE/rWDZOBWGTY9nVN6I2b3zYRhgcmWxSoByQXAgapBAfmoKEu4rsBiPl4ArqjYMOIJsIufxObOG6P1tn0iNB571vGek/zXK/WC7UrKgJd2ojogVgPEaCXewkMqRwURyp2etOnJpPPI7SQoX8yUNbSjRH45BotwilB5ZJ+tL3gcs4NVODEkRqk3bHlZrvW8VLSMSaf/jHJwrH9zo52NNW3aRfofy4VofhCS57gmxRl1vE+sOnQ66VQ/91Z+KfqdKWwDqNr0tZ1xM0bbXfrStBCLoUKRk1lw0Rrj2uoFxAOlbSmRX6u4N81Ges3MeVYAZ1HxCEYsbWmeDWjCWr3KHr97zVhhxg2Ga8XKyCmrx9EjZnJvtDwbPZDyJc2mOtw8loeFF162N85eaZ+fg=
  - secure: pwFyCyZykpvltwETOOhybGnOJvGZGptb0rHaEG5lpXUBYw43V5nP57GwZ1frIk3nc8u3iE+8kIv2Y4NofSfX1am1vWMDEpcSOQgBVJKMDZsFJcPFHLx8bapQLikWQz9cEv9jU7EqlGIPGwg7AIXVerFBYQAzQSqTYOtmvKR3BEIkM3M0u4byF/cE9KfeCAozJl/hbWIhQ2mlWDqlvA2xHT3xz0nzFMFK8Zuk98MfLISeOrgwEt0Np1wtkVUACY+8yFvbCdwmDHQEJl1fxCHQ2kkjeyEVge2012WSD/BSnJ4+tgCCH5W1+L1AxSdw42IEWQoY//F7EUwV/xwyxeqjqH73Ln2L6n/orz7HP8tsM8I5YPro1tuhD7n8E8MA22pzd4jFu5EG+hPh1kwQL7+shoOcjKYI7rS03heZRTxhMOCDfCc4PIQf+ZQMjGsoifdzv35J0T93KxJf8peBWUJ1SF+T2JxMFxEaCzRS8fIE2mW9IXtrHtPrvj81jDkq/2yfhH9PKG/1CK/KtC5bLZVjk7/RSHwWofAmBCU6pXkAX04o/ag0JcNFcjEwvYwFVENyl2fUyOil79B6Antifzfn0VrJ5aD3ivcWWWvI3EBmyJjNvzIRLIU/mvteZ1hdeqpfSZWiqI1S9m1IpdtH6QzzI4cEFRALmQ52LjXizue0XvY=
  - secure: MVoFRL9yVU08/QdhhwphX0KcGfrLk21ibahBhi8zpdknlMEQFPltfKZxpdcd1gw9IGeNBG6Puh2rr+swKPhBjIPF9JcRcrC0RnMTJihp01ATDNpQ2k6W1/8/WhXeUCKo6s6lkcCGR+xnUrLluL+PNnWDChLFzWIqdn+QOmo5LnhQIriJdTFSqO+JRMUay8aW/CEwwF7+D5V6tkH3tk0ULJuu633RCzbVA5ljquC2KYJ84Bn3lUWXpR7Vbd8A5nVGy7CfYN4544Y72p1sa0AlXigQE5H0NSxhOncQip5BbERBQIcb6zlqaCy/sg+sXrYRr/7XVZ6+C9kltHaDwHXvlU4CaoedJKk/Ufsf00LcUBp/VENIwrHxC7OnP80HPZyzr42OIIkcjYU26+ThNiB/fzU1FOjhVdut2Fgdcp8tOap5fN7AnfjktElSNCy8jlucN8DT2vBoEqUe/a7L4jDSSn03YH50RirO+E+Ym8Q+7LTelMUMKER566iEByIB83XBd/GBYuV1EzsFffbrrk2Lw1V/o5zgBFRuQ7PFeQomk0cqXKLWPhvZy9OXDnkWWdnHxPi1gwNII+qc/i6BdIUJ1cMy9IWJywp/9CxvHIGEw2G9Qq2dUD/Xi6AQnEl0AIf9YJbCa7KPZRbruu6p65NwXp19yKq1EpTStfn0yjql/R0=
  - secure: DGfbf+4nFGnFQWdvbcEusS0xPnOy6cPhx+NVOwi8yZPSyO4j5zbm09c92s2xF6aG//VEuLAtWtGfQDy+v7TwsM26RpNiwJFU66K7TXglMxQT1qmCaNlp2QGEsVgshIMJFwioVXCtqa9NvWhXf+50+T5B3vy2k21UPnY9zOpyo6taVXsmBGeL5zs6rE7mYLiFFVMfcbbrdQknN0IU0rhNWIrFwKX73k+0twwZBSn0YxC3GAzByocHARH6Iu3UKFHedUCkosI29hun17y510FedwrxDJkVbCq7x5i/bn4LGQm4F7omanu0TWn4xPsbxDnGUuT2OIrzSt2hAN4YcAalK8KbMEF31LZlrVvU3J2MMEMfmccuHO/nhf810DGcDzuEFkGrCoPKttsNPJeTGaHKxpNQ+c9G/eAKbQ67PqPbxQyp5j5JwuscrxUy0RwJDoE8ff0XSTMZChHi4qk6jUVPm3FmhLtYHySeAwM+Nw46hnsnBq6jEkbyFCr82YGaKWyVCR4XnbDiYMcn8WCt8uTd/0sca5xsd/9VUTY97r/xzPcA1iH67yxLuf6b7SexZLSWXkXNubX+rCc/o096xcTOy2GHOS8FC3QN0/xqmHcvLKU5W3lpfShmcLdi2kfdSBwvanPGGLqfBPJNlXyDzRMUk6Cd88iBk0spK9Rba15E44I=
  - secure: RWuCsxq9RyXgcABfmV804L/KgWRQM6PawmWTJ7AZPit0Qa6lY0S2ZVHO3aAf3Yl76epYA7hOCx0+bEfGyqhmyUpMScZZHp0pQtBzlqDrpeGvRkWmdPuPrlbF3k0CRaMNxFQl17Lyqq9qVhJWX7NtB5AOCy4P8bHScYGoyXNUwzg+mAZJQp0W4sQWQh8DQAdqjxuIJLL/tUsM/vfuRxlPlI+VSXcAeVwtdqqagDVVWEijocWpXEu6iTBRpMs6IxqlOJNtnX4a15OzU6roJ3ugP150ZM+u9QCg1yO4mufVxDtkp6DXObsqDw0sCaLtiwJyADWfyGQUZxeY7RFWi1Un2Yv0z5mdQUmzg+beTAiSUI7S097UygKc5Me6rNDXEp2p+Fl0klE8Dde4mxw12mFmGmLHbKqvuzMCm0hc2bV3E3wrQIr/I+IbZB4rEMSl8It3jln3TKFUnEvACPvFDsuEhZHdQgRUCTA05mAc8w/Y/g+jr2LcHER/sVd6jvQ3XPLVtGDOGNmLQh6FrFiPWull+pibVgRZscwwYcd31kCG3T9mjCevSJzqY2DhCZwHVXkYpHIY4bCg0ojjtsAqK2gFrAWA37ULXQrnlRoHcJvMzhPiQABGQUjZnTJ0xD2xHMK0URzAAaE7uG3+2c10ABh247tQPWSOWn3mY6isBHuKOoo=
  - secure: Ie8fRSHc51X8Gxzbw5CQcnTOtSNAvxVLzvXe0bFYdbdtMvtbn7IvR0FNaQ0YVSydtiVHxkbeGR+AM65N53KW8kbUzjhipw9X/3zXtgJjFEv13yfZxvfKa3qMwwAfOBKWjOLxrxNhGteCs3sM1rrhClphWZVe2ahUNFOMO0lN9eGG1RWILhRHqfbv2HrH/eFNpOD55b2RlQv6qkKmKxtvtoBOM328hiXjvbBVAYfGRdfChkH91YOGmIGBpyZb434DmbcixnoAQnS0XARpeKW/U7QF3VT2CUWWKl1XiuE7eM+34QS/q/NIYHU7Q7emKEqOegWdOPViwgvbcUVUmaE/VH35jAPk4iPj1r/pM7WGk6ZVGuq1OU5NzIRiXxmi8QNC4Nkc12Hzap61mngz8maHvo37snoSnwz5JyiR7RZqiSpSTSq81OzgOenhxW3shEtrPwqjJteV3Zt+ES4aJ+x3e+9khHDHa9q0MLVsr/7meoYs0F6ossHzcBT6GNsQ4JEF4iLUbZy03JqpUFfq3q27bShqBrRvJy1+6YR0/jlsmF/RumtDTqGlfCr5MwY9yleqHQL4IKEKCoooY+Uo9d/frr2k2KOTx0s1m5o7wDuENicJyGRHjUZdsENIGRUUs7aNiD7ZS63EEvCP8+b9q1hgRHsmWJjXM3k9TOUSvrVJ0pE=
  - secure: iFHHYkfm82RurPxsqcVkp3kgrCujiGgwcJLPVUyZuefifQggC71G0+Ebd/qp07lwEogvQo/v0x8NFYygQI4+ddvSnszFg6LYAeXOpy2Fo90VRodmI31F8XQ5K6A5tp0n47e8OgcI2NR8GHSQd699O7irt55guMNfby2uVGzNWuAbc4GUM7RGcO8eXOmTodsxAiEyQ7OQRdPzBswQr+RingNkYr6bzkmMTcdfWJ41dx/tAPrFNxMwR1F+bqH4GH/VtnPooEZCnZtEtvhI/lN+GgfLuB+NNzfjgNuxhYwLvRuWY7nxnIfTH4B/6R8okbJyX2RQ1d+j2voguDCyovrVrCxuWm3H7G4c42TzqBpd7AFbRL1iXntLIvyHfG4uGqp8mHF1SIDSq0Btot2nt/GquyXrL7skyHeSAVw16j+js69Ru4OhlrO0DcyAuRqHUqdxuldCdluEqytUI8ff6KcTlLY8EdthDkLD0qWqRx73aY9XbyvV8ZgMm5qFDUQpgffj2uueR2knZ1jtBGOA3yJUpyNuLi3dMUgmV0ZGG0MhysUuzzrjcwq703Wo50tkZacTGL9dLluO/ZwFogiprQzR7HXo/aqItumpcgeoDSveg9/7f65+KZbdU4ZG1QV6uN907wbAW5CLD++SMhDPghh+lHp+zZbLQGE9YP/jAlYc138=
  - secure: oZVXRGD+CWElwgtznrqLlJWuoeDUnZjc5S/RDG+07sYXD1SDjASXZzBxir370GVq/GRBPLu5JU5PLXB+Kv4Ue1rVSPXhQ7Jm9FFryE4URjSUdtJ6nXPHVpu0k7pf4vr7buoViCW6Jb3YEViJz5+wStQ4A1DZeTT4pgF5jz4w/BkqHmL6yqpt5HsrRbY6xG4unEVlPn6vMM3y06LZLPbmB1e5fUpHYimXzTyiZU+lb2V51o5SBbYgvRaIGyREn51/weaIj+X2mVX8e3XuMYwvcBp8dL6AYzKnlGprlN3+82icQeS0ZjmFm0MGrFIBPAiZ7hLIdYNsww21++KOjznJbBewcYSCk1ob9vXlvjZU4vfMDBEIhgNl6APDe7HI3urfPJV04KeQx9L1mVgHk6IkzoZs/8LOWCnkLceJHHhbVVHFj1x+Kwg8Ot4oG27x/FL0m1XH+sriGVg04RobqW2ELUSG+6F+Ancw8Sg0cfv3uBw1ugB/BblWzvmDbN3myrlkZpNMvj2jXVmgdD2Ww9jFqHIMIi/1kZC5kdYAJMEH9CFDHHLPYm7Zw7CjUmNolFC8Y7UBWCRjC1aeGPNHz7NE7MnTiDLC0u53sWbKgydH/fhwQOK9FEMl+XH3zaHt7k6VsZmi3F9UjJUm6/+ItYeSAa8gnTcR9uOTTdCWUDfcAuo=
  - secure: o7O2jWJ4VU5M5/z088xjfrbi1rMrI47ZbnYci9GU/d4OYrTf3jukKC5p2UHFHwCKyyCqPMUgVw5DUoYEZWY4eO6KvC/jQW52QqvUVtb7sbpAQPjCBHRcwHhUIh4S/J98Muatzzt8tQnW3lb8uNYbHdxcoHmaivpgW3zgbZa1fHA8taEt+kW/+e1XXW4gtmdGkx8YGnQOf8SlVdN9cqgFZYfu4IgSbfzIGfrK6SyOOf4Ojzisaz/8Bj7cvlFaVxnUscg+aHNXTtmJx+GQNz9FCHaU8ONJXCZ2RoNs/aFQa20/GlyERqzr6XFgKEN96Q4tLZqZaMtYVa3Ee/sMpdYau+pOOihB4JahzQgE3L473W71OWAO6CP1iHB7e2pE3WhRlwdfivab/HFi0DN0sW23Aap2Pfy+rQIgQ9mHheswX/6M8rMFZaEN3RMhtlRX+FamLxc7VksR+w4u9DTv6GUTEwRiTKTX/wFh7fQnzjDuym0cs9mGNKqMobK1jc53plO8ThyvdEfvSpybYNwYkremBbscRBF6YB4ObLQZdeTG6NQWxc4f1DhxOzXFvvoyZ/2J/fdrM9j1Hl8vsQyV5N/L0wgAif1TP0fhutBaTCKtNmPJFsYHr5VAW1Y3Rw1mKd1Nz3OCK9QnIDTWpCF7P7lI7ZTvmbymYrqKe20kemeoio4=
  - secure: GBVQO/67W/vneYe/Kw499p9haeVgre1b/I1ilK2pR8Tg4u4ljBIfyV/y449we45MsR3mEnoKsTHNnSmd0xVI9Vren7T+qYJweflZWAyesu12+EgRtI3v+mLqk4x/GN7+TIqJlHnYYYKJT0d2/soKPMqUPEb6tPBmGFvw5F1pkzB+93CM/fZ5yBpQiXSkRcth0dgUMakBOpu31BxGGBQSYV6R6dwtYBYxSYKsjmEVfdNoXw9Mp1AfyIoYDxKusW6hZKtrZ5cZnK61Fc7bBlYT8/nwcpc7DnJMprX3UfA/3L8Xa2NaYcb9XoOQCHbgP6kKV5ULAUu/GdQMKMkozDSl3eR6622n8+BxeSMNPnfN5lDDuF2mU4qP/GQY1FAinw5r20RHaCfxEaQGNHnC5zbl+fHgV1vKN1AZ71/6hu1ls4um3VCqxRw/HZPjo0g0ANzNuyuAl1nZkcMxsDAqVYoGb382+EphMF7UL0DXEuHGqRRkf51+PIIjvkLxY29RrXtnI+wc+LTIqLjy/TTEzX45AwoN5Rv05HO+bsvBvqWGX0J8ZpsGC6gyA1p+UfBe2c3Pbp6rcgCHCBw5TfEmV0COFy+RrmaA3lacV6ahQZomqPxIez3RmiW1gu7SMy6upz+VH+QC2HcYLBaETHB3w6OG3aAywmKa2YjWw/CMbh4dJfo=
  - secure: OtOnGqvHibMX+QSWDaTpJd/mBpoYfpHw5cskkSBe54wzFTuAy3DqYaxHE7DU17oGloAyoyVQGsShiOAIEkMARKKvh8fmsMcgIN4yi8djWd0mFjSZys2rFA1/lGCBNWgMG1KaZRAJYE6mS7ufRVRyXSrrwjq2fPFBIogptDZYA2Y7RxAjF3QEetf8Pajdux1vHa57cOeNYbwAbqEeI3q+8cQNhFXE1LMYUFQmI1D2WQfa3nrFogbsGA/WTIuQ+Y2xoLfdONKbXJo8GlJTQ3D3ME2cAvsvjPn0wGPPn+IdArXC9l/rDt5JT5FGn8xwdPmxA1N6qPfa7Bh8WsgyazLfTtN4QkuUqt+3DlEVgjAwfwiJyQDzKTqzyBcYymw1oxV/Sg8H4/Im55GNt1TDFaZziWNbnldQkN0lBWOXe527zX2lFcPvX6kFbHKFwAGCyH6a9abXEBhA82DR96x/0X0BG5i+OdhRf1ePMq5wKxh2t3ZDBqbwqXOioaZnvQz3Z1p9JmZtKVoBIXJ+B+On0nV8FCAUSYdhJ7BWDLgeMkj+/BzIyrxMBMWjwKkrvZ1z646lmYubscY0MBycaTtIER+oCWypNuf+JTwXw97U1tdCdsn5e8hEHMssuNuvRF3l/5a88Jldoljc7//SJ96LjCIx0bQo1Z7Hq83cr9J4ADRXxec=
  - secure: HjTquvx8VwjOUc+cb4xuSbpO1lgSvaOMFEusNDLwmI5OZPRAI77AVtirGQVyKYePWFs7nHflV0dzRiHLdu1gtA4W/Tv8Tru97G49yKqIyUUn8meHYmJcDLWge2l3PdzHItptkAz+dNM/qXlGXtL4eymgGUZ5/7W0upwDW0+r01fujnAYIe5inJy+fvTqOmXoJOk5zxCPMB8VWm9bg1HFEvvCu5jYIC/1KqRCoroJWjwTi8FP+1mmQyb+O9gPwrox6d2deGOH6M7xqqCLrJ10X0L5BaARVnVzBh3COIbPGsGgJrZPESPXMG0mOfuxyDBLPmPbasAtHwK8HHFU0QFcxl+/6KVs6v0uibKa3PQFQEQDLkLLiRZY+T1g4lNgMXp/UlhZcL1k4lvq0Oe9M58s9DLcpTa5ckdP7yvzabGT2ObErfbSqIsyB+5cixenIIC2F0wwgAjJ3fHOLD5G15R8ThHA2vljSbrOUmuHQpKBDrizXIgDc9aaWHqnOWhBV6nCXuRttwKagnDT8cigFkA8hJTd6o7YXk6Pl9UnB0CLXpe274K54TRdbM8n39ctQbhk96L+ty+ZAiurOlfAGOGXgaY9Z67/0E+JlJ7OINSq9ohuvqhu8LBnKOIs+x3wPsBMgw9NwUfHT1GUKvkSwWr27ZLm6LZIFmFJJLosjgygFsU=
  - secure: MBaI74GlkT927i/5PWRcoPjk8ZDq56072CaJIeG13NjwHT8dFlFMwQsJ6xZaNxXbDXgvodglyu9Hu0FG5V1YOBXktl0dtu5niOyYgOI+NFwlQHYhYS5kKY+Lai8qFuzzVUgjtA3emLiZo8iXbh+XuFqvInD16fUx0fKLWcWTKwHdb6djJuZWuWhIpFqArTbcRDZeFzN6/tBP9breNsenCpX14lZeSIt1GwRoqOIDNZfXvPK5xBygsHDV71vrSH/4z+IxBKbN9A4Zz+mahVbeCPO0JBeOymepg/0qflVHUacTL8saIDx3OC4CoUUnh7m1J7AcG63SaiqtFBbE1Sf5RO6rfT7e3Abwe2qcoawfyRdsIqxAHQr0sqfU6eGKqwuvXA7O8s5C5tY1y8su6BAAcIz6Z9fs5TF3ooJbLGI6NTbczRUMWoo0O0vvFVvAmE77xYrqzMDNET0yBaAEXURBrCKF9+gKb5x7EEt0I0QF0a4Hh5CLw5p/gmMNB1RxpxupOtvC2L71oT8Xaf7klLuo3tk+uTe1bP98H654f/kXEhJaEc7IwIWCFEQ/oRTHg5xDhn+9MNMUVDJ5Me1//Sifdg6JLu0DUi2GdrQO5RSHXMumLVg0qlf1dz4VML4y6P05QhKp+DNM0tHLFlZkJm8uqNQAcD4CneFD+HVf1zZlTTc=
install:
- echo "MAIL_USERNAME=${MAIL_USERNAME}" >> .env
- echo "MAIL_PASSWORD=${MAIL_PASSWORD}" >> .env

deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: "${ACCESS_KEY_ID}"
  secret_access_key:
    secure: "${SECRET_ACCESS_KEY}"
  region: us-east-2
  app: FlipBook
  env: flipbook-dev-env
  bucket_name: ${BUCKET_NAME}
